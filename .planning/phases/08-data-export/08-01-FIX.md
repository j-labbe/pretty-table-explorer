---
phase: 08-data-export
plan: 01-FIX
type: fix
---

<objective>
Fix 1 UAT issue from plan 08-01.

Source: 08-01-ISSUES.md
Priority: 0 critical, 1 major, 0 minor
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/08-data-export/08-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/08-data-export/08-01-PLAN.md

**File to modify:**
@src/export.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add UTF-8 BOM to CSV export for Excel compatibility</name>
  <files>src/export.rs</files>
  <action>
Modify the `export_csv` function to prepend UTF-8 BOM to the output string.

The UTF-8 BOM is the byte sequence `\xEF\xBB\xBF` (or in Rust: `"\u{FEFF}"`).

Steps:
1. After converting bytes to String, prepend the BOM character
2. The BOM is a single Unicode code point U+FEFF (Zero Width No-Break Space)
3. In Rust, use `format!("\u{FEFF}{}", csv_string)` or prepend as bytes

This ensures Excel detects UTF-8 encoding automatically when opening the file.

Note: JSON export does NOT need BOM - JSON parsers handle UTF-8 natively.
  </action>
  <verify>
1. `cargo build --release` succeeds
2. `cargo test` passes
3. Export CSV with Unicode content
4. Open in Excel - characters should display correctly
  </verify>
  <done>CSV files open correctly in Excel with proper UTF-8 character display</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cargo build --release` succeeds
- [ ] `cargo test` passes (all 25+ tests)
- [ ] `cargo clippy -- -D warnings` passes
- [ ] CSV export includes UTF-8 BOM at start
</verification>

<success_criteria>
- UAT-001 resolved: CSV opens correctly in Excel
- Tests pass
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/08-data-export/08-01-FIX-SUMMARY.md`
</output>
