# Plan 07-04: Horizontal Table Scrolling

## Objective
Implement horizontal scrolling for tables wider than the terminal, allowing column widths to be respected without compression.

## Problem
Currently, ratatui compresses column widths to fit the terminal width. When users resize columns with +/-, the stored values change but the visual rendering doesn't reflect the actual widths because all columns are squeezed to fit.

## Solution
Implement column-based horizontal scrolling:
1. Track which column is the first visible (scroll offset)
2. Only render columns that fit in the available width, starting from scroll offset
3. Show overflow indicators when columns exist off-screen
4. Auto-scroll when column selection moves off-screen

## Tasks

### Task 1: Add scroll state tracking
- Add `scroll_col_offset: usize` to track first visible column index
- This represents the index into `visible_cols` (not data index)
- Initialize to 0, reset when table data changes

### Task 2: Calculate visible column range for rendering
- Before rendering, calculate which columns fit:
  1. Get available width (table_area.width - borders - highlight_symbol)
  2. Starting from scroll_col_offset, accumulate column widths
  3. Stop when next column wouldn't fit
  4. Track: has_left_overflow (scroll_col_offset > 0), has_right_overflow (more columns after)
- Only include columns in range [scroll_col_offset, last_visible] in the Table widget

### Task 3: Update rendering to use scroll window
- Modify header_cells to only include visible range
- Modify data_rows to only include visible range
- Modify visible_widths to only include visible range
- Adjust selected_column for TableState to be relative to visible range

### Task 4: Add overflow indicators
- When has_left_overflow: show "◀" indicator on left
- When has_right_overflow: show "▶" indicator on right
- Options for placement:
  - In title bar: "◀ TableName ▶"
  - Or as visual markers in the table border

### Task 5: Auto-scroll on column navigation
- When user presses h/l to navigate columns:
  - If selected column would be before scroll_col_offset, scroll left
  - If selected column would be after visible range, scroll right
- Keep selected column visible at all times

### Task 6: Update title controls
- Add scroll indicators to title when applicable

## Technical Notes

### Column selection mapping
- `table_state.selected_column()` returns visual position in rendered table
- Need to map between:
  - Global visual position (in all visible_cols)
  - Rendered position (in scroll window)
  - Data index (in original data)

### Width calculation
- Available width = table_area.width - 2 (borders) - 3 (highlight_symbol ">> ")
- Each column takes its width from the Constraint

## Verification
- [ ] Columns render at their actual set widths
- [ ] Pressing +/- visually changes column width
- [ ] Scrolling left/right with h/l works when columns overflow
- [ ] Overflow indicators show correctly
- [ ] Column selection stays in sync during scroll
