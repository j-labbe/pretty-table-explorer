---
phase: 03-navigation
plan: 02
type: execute
depends_on: ["03-01"]
files_modified: [src/main.rs]
---

<objective>
Add scrolling controls and viewport tracking for navigating large tables.

Purpose: Enable efficient navigation of tables larger than the visible area with page-based movement and position indicators.
Output: Page navigation (Ctrl+U/D), position indicator showing current row, scroll-aware viewport.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-navigation/03-01-SUMMARY.md
@src/main.rs

**From 03-01:** TableState with selection, render_stateful_widget pattern established
**Key insight:** TableState.scroll_down_by(n) and scroll_up_by(n) move selection by n rows. ratatui auto-adjusts viewport offset during render to keep selection visible.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add page navigation and position indicator</name>
  <files>src/main.rs</files>
  <action>
1. Add page navigation keys in event handler:
```rust
// Page navigation (half-page like vim)
KeyCode::Char('u') if key.modifiers.contains(KeyModifiers::CONTROL) => {
    table_state.scroll_up_by(10);
}
KeyCode::Char('d') if key.modifiers.contains(KeyModifiers::CONTROL) => {
    table_state.scroll_down_by(10);
}
// Also support Page Up/Page Down
KeyCode::PageUp => table_state.scroll_up_by(10),
KeyCode::PageDown => table_state.scroll_down_by(10),
```

2. Create dynamic title showing position:
```rust
let position_info = match table_state.selected() {
    Some(idx) => format!(" Row {}/{} ", idx + 1, table_data.row_count()),
    None => String::new(),
};
let title = format!(" Pretty Table Explorer{}- hjkl: nav, Ctrl+U/D: page, q: quit ", position_info);
```

3. Update Block title to use the dynamic title variable

Note: scroll_up_by/scroll_down_by are just convenience wrappers around select() - they move selection, and ratatui handles viewport offset automatically during render.
  </action>
  <verify>cargo build succeeds</verify>
  <done>Ctrl+U/D and PageUp/PageDown move by 10 rows, title shows "Row X/Y"</done>
</task>

<task type="auto">
  <name>Task 2: Add column position indicator for horizontal navigation</name>
  <files>src/main.rs</files>
  <action>
1. Extend position indicator to show column when selected:
```rust
let row_info = table_state.selected()
    .map(|r| format!("Row {}/{}", r + 1, table_data.row_count()))
    .unwrap_or_default();

let col_info = table_state.selected_column()
    .map(|c| format!(" Col {}/{}", c + 1, table_data.column_count()))
    .unwrap_or_default();

let position = if row_info.is_empty() {
    String::new()
} else {
    format!(" [{}{}] ", row_info, col_info)
};
```

2. Update title format:
```rust
let title = format!(" Pretty Table Explorer{}- hjkl: nav, q: quit ", position);
```

3. Add column highlight style to Table:
```rust
.column_highlight_style(Style::default().fg(Color::Cyan))
```

This visually indicates which column is selected when navigating horizontally.
  </action>
  <verify>cargo build succeeds, cargo test passes</verify>
  <done>Title shows "Row X/Y Col Z/N" when both selected, column highlight visible</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cargo build` succeeds without errors
- [ ] `cargo test` passes all tests
- [ ] Position indicator shows current row/total
- [ ] Column position shows when column selected
- [ ] Page navigation moves by 10 rows
</verification>

<success_criteria>

- Ctrl+U/D and PageUp/PageDown work for page navigation
- Position indicator shows Row X/Y in title
- Column indicator shows Col Z/N when column selected
- Column highlight style visible
- Phase 3 complete
</success_criteria>

<output>
After completion, create `.planning/phases/03-navigation/03-02-SUMMARY.md`
</output>
