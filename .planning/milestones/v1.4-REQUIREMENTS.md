# Requirements Archive: v1.4 Performance

**Archived:** 2026-02-10
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: Pretty Table Explorer

**Defined:** 2026-02-09
**Core Value:** Clean table rendering with proper column alignment — no wrapping, no spacing issues, just readable data.

## v1.4 Requirements

Requirements for performance milestone. Each maps to roadmap phases.

### Loading

- [x] **LOAD-01**: User sees table data on screen within 1 second of piping, even for multi-million row datasets — validated via streaming parser, sub-second first display
- [x] **LOAD-02**: User sees loading progress indicator showing rows loaded so far during streaming — "Loaded X rows" in title bar
- [x] **LOAD-03**: User can navigate and scroll through partially-loaded data while loading continues — viewport-windowed rendering enables this
- [x] **LOAD-04**: User can cancel a long-running load with Ctrl+C without crashing — graceful cancellation, keeps partial data

### Memory

- [x] **MEM-01**: User can load 1.8M row dataset with less than 1GB memory usage (down from ~2GB) — string interning via lasso, 50-80% savings
- [x] **MEM-02**: User sees memory usage displayed in the status bar — sysinfo RSS in MB, throttled refresh

### Rendering

- [x] **REND-01**: User experiences smooth scrolling (no lag) through 1.8M+ row datasets — 30 FPS frame timing, needs_redraw optimization
- [x] **REND-02**: User sees only visible rows rendered (render time constant regardless of dataset size) — viewport windowing, O(viewport) proven via benchmarks

## Future Requirements

Deferred to future release. Tracked but not in current roadmap.

### Search Optimization

- **SRCH-01**: User can search/filter 1.8M rows with sub-second response time
- **SRCH-02**: User sees incremental search results as they type

### Advanced Profiling

- **PROF-01**: Criterion benchmarks for parsing, rendering, and search operations
- **PROF-02**: Flamegraph and heap profiling infrastructure for ongoing optimization

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Apache Arrow columnar storage | Over-engineering for table viewer; string interning sufficient |
| Tokio async runtime | Single data flow doesn't justify async complexity; native threads sufficient |
| Database-side pagination (cursors) | Only applies to --connect mode; piped psql is primary target |
| Search indexing (tantivy) | Adds significant complexity; linear search acceptable for v1.4 |
| Frame rate limiting | Ratatui's built-in diffing handles this; add only if profiling shows need |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| LOAD-01 | Phase 15 | Complete |
| LOAD-02 | Phase 15 | Complete |
| LOAD-03 | Phase 15 | Complete |
| LOAD-04 | Phase 15 | Complete |
| MEM-01 | Phase 16 | Complete |
| MEM-02 | Phase 16 | Complete |
| REND-01 | Phase 17 | Complete |
| REND-02 | Phase 17 | Complete |

**Coverage:**
- v1.4 requirements: 8 total
- Mapped to phases: 8 (100% coverage)
- Unmapped: 0

**Note:** Phase 14 (Profiling Infrastructure) is foundation work that enables all subsequent phases but doesn't map to specific user-facing requirements. It establishes the measurement infrastructure (Criterion benchmarks, flamegraphs, heap profiling, integration tests) that prevents regressions during optimization phases 15-17.

---
*Requirements defined: 2026-02-09*
*Last updated: 2026-02-10 after roadmap creation*
