# Milestone v1.1: Distribution

**Status:** SHIPPED 2026-01-14
**Phases:** 5-6
**Total Plans:** 4

## Overview

Make the tool easy to install and keep updated with multi-platform releases, an install script, and self-update capability.

## Phases

### Phase 5: Release Infrastructure

**Goal**: GitHub Actions workflow for multi-platform builds, version embedding (--version flag), release asset naming
**Depends on**: v1.0 MVP complete
**Plans**: 2 plans

Plans:
- [x] 05-01: Version embedding + --version flag (clap CLI parsing)
- [x] 05-02: GitHub Actions workflows (release + CI)

**Details:**
- Added clap dependency with derive feature for modern CLI parsing
- Created release workflow with build matrix for 4 target platforms
- Set up cross-compilation for Linux ARM64 with gcc-aarch64-linux-gnu
- Created CI workflow with test, build, clippy, and fmt jobs
- Binary naming: pte-{os}-{arch} (e.g., pte-linux-x86_64)

### Phase 6: Installation & Updates

**Goal**: Install script (curl | bash), self-update command, platform detection logic
**Depends on**: Phase 5
**Plans**: 2 plans

Plans:
- [x] 06-01: Install script with platform detection
- [x] 06-02: Self-update command

**Details:**
- Created POSIX-compatible install.sh with platform detection
- Supports Linux x86_64, Linux aarch64, macOS x86_64, macOS aarch64
- Downloads binaries from GitHub releases with checksum verification
- Added self-update command via ureq HTTP client and sha2 for verification
- Install script detects existing pte location for proper upgrades

---

## Milestone Summary

**Key Decisions:**
- Used clap derive macros for cleaner CLI code
- Used native ARM runner (macos-14) for Apple Silicon instead of cross-compilation
- Used gcc-aarch64-linux-gnu for Linux ARM64 cross-compilation
- Used ureq over reqwest for synchronous API (no async runtime)
- POSIX shell (#!/bin/sh) for maximum installer portability

**Issues Resolved:**
- Fixed macOS-13 runner retirement (updated to macos-15)
- Fixed install script not upgrading existing binaries (now detects PATH location)
- Fixed clippy warnings and formatting issues in CI

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
