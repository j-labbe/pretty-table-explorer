# Milestone v1.2: Advanced Viewing

**Status:** SHIPPED 2026-01-16
**Phases:** 7-10
**Total Plans:** 9 main + 4 FIX plans

## Overview

Enhanced table interaction with column controls, data export, multi-tab workspaces, split view comparison, and scroll indicators.

## Phases

### Phase 7: Column Controls

**Goal**: Resize, hide, and reorder columns (view-only modifications)
**Depends on**: Phase 6 (v1.1 complete)
**Plans**: 4

Plans:
- [x] 07-01: Column state and width resizing (+/- keys)
- [x] 07-02: Column hide/show (H/S keys)
- [x] 07-03: Column reordering (</> keys)
- [x] 07-04: Horizontal table scrolling (added during UAT)

**Key accomplishments:**
- Created column.rs module with ColumnState and ColumnConfig structs
- Width adjustment (+/-) with min 3, max 100 bounds
- Column visibility toggle (H to hide, S to show all)
- Column reordering with </> keys
- Full horizontal scrolling with viewport-based rendering
- Overflow indicators (◀ ▶) in title bar

### Phase 8: Data Export

**Goal**: Export current table view to CSV and JSON formats
**Depends on**: Phase 7
**Plans**: 1

Plans:
- [x] 08-01: CSV/JSON export with format selection and column visibility

**Key accomplishments:**
- Created export.rs module with CSV and JSON serialization
- Format selection dialog (C for CSV, J for JSON)
- Filename input with defaults (export.csv/export.json)
- Exports respect visible columns in display order
- Added csv, serde, serde_json dependencies

### Phase 9: Multiple Tables

**Goal**: Named tabs/workspaces for multiple query results + split view
**Depends on**: Phase 8
**Plans**: 3

Plans:
- [x] 09-01: Workspace module and tab bar rendering
- [x] 09-02: Tab navigation and new tab creation
- [x] 09-03: Split view for side-by-side comparison

**Key accomplishments:**
- Created workspace.rs module with Tab and Workspace structs
- Tab-isolated state (data, column_config, filter, scroll, selection)
- Tab bar rendering with numbered tabs (only when >1 tab)
- Tab navigation: Tab/Shift+Tab cycle, number keys direct access
- Query results open in new tabs
- Split view with V toggle, focus switch via Ctrl+W or F6
- Yellow border on focused pane, dark gray on unfocused

### Phase 10: Scroll Indicators

**Goal**: Visual arrow columns on table edges indicating horizontal scroll availability
**Depends on**: Phase 9
**Plans**: 1 + 3 FIX plans

Plans:
- [x] 10-01: Visual arrow columns on table edges
- [x] 10-01-FIX: UAT bug fixes for indicator positioning (2026-01-16)
- [x] 10-01-FIX2: UAT-004 fix for right indicator edge position (2026-01-16)
- [x] 10-01-FIX3: UAT-005 fix for wide column navigation scroll (2026-01-16)

**Key accomplishments:**
- Left indicator (◀) when scrolled right
- Right indicator (▶) when more columns exist to right
- Two-pass width calculation for proper indicator positioning
- Partial column content display for wide columns
- Immediate scroll behavior (no "inching" on wide columns)

---

## Milestone Summary

**Key Decisions:**

- Viewport-based horizontal scroll: Render only visible columns at actual widths (fixes ratatui compression)
- PaneRenderData pattern: Pre-compute render state to avoid borrow conflicts
- Tab-isolated state: All table state in Tab struct, not main scope
- Two-pass indicator width calc: Reserve space for right indicator, recalc if no overflow

**Issues Resolved:**

- UAT-001: Left scroll indicator overlaps table data
- UAT-002: Right scroll indicator position wrong
- UAT-003: Column selection position offset when indicators visible
- UAT-004: Right indicator not fixed to viewport edge with wide columns
- UAT-005: Wide column navigation causes incremental "inching" scroll behavior

**Issues Deferred:**

None

**Technical Debt Incurred:**

None

---

_For current project status, see .planning/ROADMAP.md_
